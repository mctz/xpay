<!doctype html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <title>XPayä¸ªäººæ”¶æ¬¾æ”¯ä»˜ç³»ç»Ÿ</title>
    <meta name="description" content="XPayä¸ªäººæ”¶æ¬¾æ”¯ä»˜ç³»ç»Ÿ æ— éœ€ç­¾çº¦ æ— éœ€ç¬¬ä¸‰æ–¹SDK å®Œå…¨å…è´¹">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="favicon.ico">

    <!--<link rel="stylesheet" href="assets/css/swiper.min.css">-->
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/iconfont.css">
    <!--<link rel="stylesheet" href="assets/css/font-awesome.min.css">-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!--<link rel="stylesheet" href="assets/css/bootstrap.min.css">-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">
    <!--<link rel="stylesheet" href="assets/css/magnific-popup.css">-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.1/magnific-popup.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/bootsnav2.css">

    <!--For Plugins external css-->
    <!--<link rel="stylesheet" href="assets/css/plugins.css" />-->
    <!--Theme custom css -->
    <link rel="stylesheet" href="assets/css/style.css">

    <!--Theme Responsive css-->
    <link rel="stylesheet" href="assets/css/responsive.css"/>

    <link rel="stylesheet" href="assets/css/alipay.css">

    <!--<script src="assets/js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>-->
    <!--<script src="https://cdn.bootcss.com/modernizr/2.8.2/modernizr.min.js"></script>-->

    <!-- Hotjar Tracking Code for http://msl1214.gnway.cc/ -->
    <script>
        (function (h, o, t, j, a, r) {
            h.hj = h.hj || function () {
                (h.hj.q = h.hj.q || []).push(arguments)
            };
            h._hjSettings = {hjid: 734009, hjsv: 6};
            a = o.getElementsByTagName('head')[0];
            r = o.createElement('script');
            r.async = 1;
            r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;
            a.appendChild(r);
        })(window, document, 'https://static.hotjar.com/c/hotjar-', '.js?sv=');
    </script>
</head>

<body data-spy="scroll" data-target=".navbar-collapse" style="background:#f1f2f7">

<div class="culmn">
    <!--Home page style-->

    <nav class="navbar navbar-default bootsnav navbar-fixed white no-background"
         style="border-bottom: solid 1px #e0e0e0;background-color: #fff;">
        <div class="container">

            <!-- Start Header Navigation -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-menu">
                    <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand" href="index">
                    <img src="assets/images/footer-logo.png" class="logo logo-display" alt="">
                    <img src="assets/images/footer-logo.png" class="logo logo-scrolled" alt="">
                </a>

            </div>
            <!-- End Header Navigation -->

            <!-- navbar menu -->
            <div class="collapse navbar-collapse" id="navbar-menu">
                <ul class="nav navbar-nav navbar-center">
                    <li><a href="index">é¦–é¡µ</a></li>
                    <li><a href="pay">æ”¯ä»˜ä½“éªŒ</a></li>
                    <li><a href="thanks">æèµ åå•</a></li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div>
    </nav>

    <!--Featured Section-->
    <section id="features" class="features">
        <div class="container">
            <div class="row">
                <div class="main_features p-top-100">

                    <div class="gray-box">
                        <div class="title">
                            <h2>XPayæ”¶é“¶å° æ”¶æ¬¾æ–¹ï¼šé©·ğŸ‰</h2>
                        </div>
                        <!--å†…å®¹-->
                        <div>
                            <div class="box-inner order-info">
                                <p class="payment-detail">æ‰«ä¸€æ‰«ä»˜æ¬¾ï¼ˆå…ƒï¼‰</p>
                                <p class="payment-money" id="money1"></p>
                                <p id="showreamrk" class="payment-detail" style="display: none">
                                    æ”¯ä»˜æ—¶è¯·åœ¨å¤‡æ³¨ä¸­è¾“å…¥æ‚¨çš„è®¢å•æ ‡è¯†å·ï¼š<b class="payNum" style="color: #d44d44;"></b><br>
                                </p>
                                <!--<div id="qr-pic" style="width: 168px;height: 168px;margin-top:3px"/>-->
                                <div id="qr-pic" class="img-box" style="flex-direction: column;">
                                    <!--<img class="pic" id="qr-pic"-->
                                         <!--src="/assets/qr/alipay/custom.png"-->
                                         <!--alt="åŠ è½½å¤±è´¥" width="168px" height="168px"/>-->
                                    <div class="explain">
                                        <img class="fn-left"
                                             src="https://t.alipayobjects.com/images/T1bdtfXfdiXXXXXXXX.png"
                                             alt="æ‰«ä¸€æ‰«æ ‡è¯†">
                                        <div class="fn-right">æ‰“å¼€æ‰‹æœºæ”¯ä»˜å®<br>æ‰«ä¸€æ‰«ç»§ç»­ä»˜æ¬¾</div>
                                    </div>
                                    <div class="timeout" style="display: none">äºŒç»´ç å·²è¿‡æœŸ</div>
                                </div>
                                <div class="download-box">
                                    <p id="qrmobile" style="display: none;margin: 10px 10px -10px 10px;text-align: center;">
                                        <span>è¯·é•¿æŒ‰äºŒç»´ç ä¿å­˜è‡³æ‰‹æœºåï¼Œæ‰“å¼€æ”¯ä»˜å®ä½¿ç”¨â€œæ‰«ä¸€æ‰«â€ï¼Œç‚¹å‡»å³ä¸Šè§’â€œç›¸å†Œâ€é€‰æ‹©åˆšä¿å­˜çš„äºŒç»´ç è¿›è¡Œæ”¯ä»˜</span>
                                    </p>
                                    <a id="startApp" class="main-btn" style="width: 205px;display: none;margin-top: 20px;">ä¸€é”®å¯åŠ¨æ”¯ä»˜å®APPæ”¯ä»˜</a>
                                    <a id="startAppFromWechat" onclick="showTip()" class="main-btn" style="width: 205px;display: none;margin-top: 20px;">æ‰“å¼€æ”¯ä»˜å®APPæ”¯ä»˜</a>
                                    <a class="download-alipay" href="https://mobile.alipay.com/index.htm" target="_blank">é¦–æ¬¡ä½¿ç”¨è¯·ä¸‹è½½æ‰‹æœºæ”¯ä»˜å®</a>
                                </div>

                                <div class="count" id="time-box"></div>

                                <div class="qrguide-area">
                                    <img id="img1"
                                         src="https://t.alipayobjects.com/images/rmsweb/T13CpgXf8mXXXXXXXX.png"
                                         class="show" onclick="change()">
                                    <img id="img2"
                                         src="https://t.alipayobjects.com/images/rmsweb/T1ASFgXdtnXXXXXXXX.png"
                                         class="hide" onclick="change()">
                                </div>

                                <img src="assets/images/red.png" width="50px" height="50px" class="red" title="æ”¯ä»˜é¢†çº¢åŒ…"
                                     onclick="showRed()">
                            </div>
                        </div>

                        <div>
                            <div class="box-inner">
                                <div>
                                    <span id="other-way" style="position: absolute;left: 15px;font-size: 14px;">
                                        ä½“éªŒçº¢åŒ…æˆ–è½¬å¡å…¶ä»–æ–¹å¼æ‰«ç åè¯·å‹¿ç«‹å³æ”¯ä»˜ï¼Œè¿”å›åå†ç‚¹å‡»æ”¯ä»˜æŒ‰é’®
                                    </span>
                                    <em><span>Â¥</span><em id="money2"></em></em>
                                    <input type="text" class="disabled-btn" onclick="confirm()" id="confirm"
                                           value="ç­‰å¾…æ”¯ä»˜..." readonly>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            </div><!-- End off row -->
        </div><!-- End off container -->
    </section><!-- End off Featured Section-->

    <!-- scroll up-->
    <div class="scrollup">
        <a href="#"><i class="fa fa-chevron-up"></i></a>
    </div><!-- End off scroll up -->

    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="title">æ”¯ä»˜çº¢åŒ…</h4>
                </div>
                <div class="modal-body" id="body">
                    <img src="/assets/images/alired.jpg" class="qr-red"/>
                    <p id="redmobile" style="display: none;text-align: center;">
                        è¯·é•¿æŒ‰äºŒç»´ç ä¿å­˜è‡³æ‰‹æœºåï¼Œæ‰“å¼€æ”¯ä»˜å®ä½¿ç”¨â€œæ‰«ä¸€æ‰«â€ï¼Œç‚¹å‡»å³ä¸Šè§’â€œç›¸å†Œâ€é€‰æ‹©åˆšä¿å­˜çš„çº¢åŒ…äºŒç»´ç é¢†å–
                    </p>
                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-warning" type="button">é¢†å–äº†</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="reamrkModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">è¯·åœ¨å¤‡æ³¨ä¸­è¾“å…¥æ”¯ä»˜æ ‡è¯†å·</h4>
                </div>
                <div class="modal-body reamrk">
                    <p style="margin-bottom: 10px;">
                        æ”¯ä»˜æ—¶è¯·åœ¨å¤‡æ³¨ä¸­è¾“å…¥æ‚¨çš„è®¢å•æ ‡è¯†å·ï¼š<b class="payNum" style="color: #d44d44;"></b><br>
                        è‹¥å¿˜è®°è¾“å…¥æˆ–è¾“å…¥é”™è¯¯å¯èƒ½ä¼šé€ æˆæ‚¨æ”¯ä»˜å¤±è´¥ï¼
                    </p>
                    <img src="/assets/images/alireamrk.png" width="300px;" style="margin:0 auto"/>
                </div>
                <div class="modal-footer">
                    <button data-dismiss="modal" class="btn btn-warning" type="button">çŸ¥é“äº†</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="msgModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">æç¤º</h4>
                </div>
                <div class="modal-body" id="msgBody">
                </div>
                <div class="modal-footer">
                    <button class="btn btn-warning" type="button" onclick="toThanks()">ç¡® è®¤</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="msgModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">æç¤º</h4>
                </div>
                <div class="modal-body" id="msgBody2">
                </div>
                <div class="modal-footer">
                    <button class="btn btn-warning" type="button" data-dismiss="modal">çŸ¥é“äº†</button>
                </div>
            </div>
        </div>
    </div>

    <div id="wx-tip" class="wx-tip" style="display:none;" onclick="closeTip()">
        <img src="assets/images/weixinTip.png" alt="">
    </div>
</div>

<!-- JS includes -->


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/js/bootstrap.min.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.1/jquery.magnific-popup.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.compatibility.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.4.0/js/swiper.jquery.min.js"></script>
<script src="assets/js/qrcode.min.js"></script>
<script src="assets/js/jquery.collapse.js"></script>
<script src="assets/js/bootsnav.js"></script>

<script src="assets/js/plugins.js"></script>
<script src="assets/js/main.js"></script>
<script src="assets/js/jquery.cookie.js"></script>

</body>
<script>
    $("[data-toggle='popover']").popover();
    var money = $.cookie('money');
    if (money == "" || money == null) {
        window.location.href = "/";
    }

    $.cookie('scanned', "0");

    // åˆ¤æ–­ç§»åŠ¨è®¾å¤‡
    function isMobile() {
        if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){
            return 1;
        }
        return 0;
    }

    if(isMobile()){
        $("#redmobile").css('display','block');
        $("#qrmobile").css('display','block');
        $("#other-way").css('display','none');
    }

    // åˆ¤æ–­æ˜¯å¦å¾®ä¿¡æµè§ˆå™¨
    function isWeixin() {
        var ua = window.navigator.userAgent.toLowerCase();
        if (ua.match(/MicroMessenger/i) == 'micromessenger') {
            return 1;
        }
        return 0;
    }

    // åˆ¤æ–­æ˜¯å¦å®‰å“QQæµè§ˆå™¨
    function isQQAndroid() {
        var ua = window.navigator.userAgent.toLowerCase();
        if (ua.match(/QQ/i) == 'qq'&&ua.match(/Android/i) == 'android') {
            return 1;
        }
        return 0;
    }

    // è·å–num
    var num  = $.cookie('payNum');

    // æ›¿æ¢ä½ çš„è®¿é—®åŸŸåxpay.exrick.cn v1.8-v1.9
    var url = "alipays://platformapi/startapp?appId=20000067&url="+
        encodeURIComponent("http://msl1214.gnway.cc/openAlipay?money="+money+"&num="+num+"&id="+$.cookie("payId"));
    
    function showTip() {
        $("#wx-tip").css("display","block");
    }
    
    function closeTip() {
        $("#wx-tip").css("display","none");
    }

    $("#money1").html(Number(money).toFixed(2));
    $("#money2").html(Number(money).toFixed(2));

    var qrcode = new QRCode(document.getElementById("qr-pic"), {
        text: url,
        width: 160,
        height: 160
    });

    showRed();

    function showRed() {
        $("#myModal").modal('show');
    }

    $('#myModal').on('hide.bs.modal', function () {
//        if(picName==""||picName==null||picName=="null"||picName=="custom"){
//            // è‡ªå®šä¹‰é‡‘é¢æ˜¾ç¤ºå¤‡æ³¨æç¤º
//            $("#reamrkModal").modal('show');
//        }else{
            countDown();
            countTime();
//        }
    })

    $('#reamrkModal').on('hide.bs.modal', function () {
        countDown();
        countTime();
    })

    var flag = true;

    function change() {
        if (flag) {
            $("#img1").removeAttr("class");
            $("#img1").attr("class", "hide");
            $("#img2").removeAttr("class");
            $("#img2").attr("class", "show");
            flag = !flag;
        } else {
            $("#img1").removeAttr("class");
            $("#img1").attr("class", "show");
            $("#img2").removeAttr("class");
            $("#img2").attr("class", "hide");
            flag = !flag;
        }

    }

    // å€’è®¡æ—¶
    var count = 25;
    $("#confirm").attr("disabled","disabled");
    function countDown() {
        if (count == 0) {
            $("#confirm").removeAttr("class");
            $("#confirm").removeAttr("disabled");
            $("#confirm").attr("class", "main-btn");
            $("#confirm").val("ç¡®è®¤å·²æ”¯ä»˜");
            return;
        } else {
            count--;
        }
        setTimeout(function () {
            countDown();
        }, 1000);
    }

    function countTime() {
        var time = $.cookie('time');
        if (time <= 0) {
            document.getElementsByClassName("timeout")[0].style.display="block";
            $("#time-box").css("display","none");
            $("#confirm").attr("disabled","disabled");
            $("#confirm").removeAttr("class");
            $("#confirm").attr("class", "disabled-btn");
            $("#confirm").val("äºŒç»´ç å·²å¤±æ•ˆ");
            $("#startApp").css("display","none");
            count=10000;
            return;
        } else {
            time--;
            showTime(time);
            $.cookie('time', time);
        }
        setTimeout(function () {
            countTime();
        }, 1000)
    }
    
    function showTime(v) {
        if(v==null||v==""){
            return "";
        }
        var m=0,s=0;
        if(v>=60){
            m=Math.floor(v/60);
            s=v%60;
        }else{
            s=v;
        }

        if (m >= 0 && m <= 9) {
            m = "0" + m;
        }
        if (s >= 0 && s <= 9) {
            s = "0" + s;
        }
        $("#time-box").html("è¯·äº "+ m + " åˆ† " + s + " ç§’ å†…æ”¯ä»˜");
    }

    judgeState();
    function judgeState() {
        $.ajax({
            url:"/pay/state/"+$.cookie('payId'),
            type: 'GET',
            success:function (data) {
                if(data.success==true){
                    if(data.result==1){
                        showMsg("æ­å–œæ‚¨å·²æˆåŠŸæ”¯ä»˜ "+Number(money).toFixed(2)+" å…ƒï¼Œæ„Ÿè°¢æ‚¨çš„æèµ ï¼Œè¯·æŸ¥æ”¶é€šçŸ¥é‚®ä»¶ï¼Œè‹¥é•¿æ—¶é—´æœªæ”¶åˆ°è¯·æ£€æŸ¥åƒåœ¾é‚®ä»¶æˆ–è¿›è¡Œåé¦ˆï¼");
                    }else if(data.result==2){
                        showMsg("æŠ±æ­‰ï¼Œæ‚¨å·²æ”¯ä»˜å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ‚¨çš„æ”¯ä»˜é‡‘é¢æˆ–è¾“å…¥çš„æ ‡è¯†å·å†æ¬¡å°è¯•æ”¯ä»˜ï¼");
                    }else if(data.result==4){
                        if($.cookie('scanned')!="1"){
                            $("#msgModal2").modal('show');
                            $("#msgBody2").html("æ‚¨å·²æ‰«ç ï¼Œå»ºè®®æ‚¨å°½å¿«æ”¯ä»˜ï¼");
                            $.cookie('scanned', "1");
                        }
                        setTimeout(function () {
                            judgeState();
                        }, 1000)
                    }else{
                        setTimeout(function () {
                            judgeState();
                        }, 1000)
                    }
                }
            }
        });
    }

    function showMsg(m){
        $("#msgModal").modal('show');
        $("#msgBody").html(m);
    }

    function confirm() {
        window.location.href = "/confirm";
    }
    
    function toThanks() {
        window.location.href = "/thanks";
    }
</script>
</html>
